–û–∫, –ø–æ –æ–¥–Ω–æ–º—É ‚Äî —Ç–∞–∫ –∏ –Ω–∞–¥–æ üëç
–ù–∞—á–∏–Ω–∞–µ–º —Å **PostgreSQL (–≤ –æ—Ç—á—ë—Ç–µ –ø–∏—à–µ–º PostgreSQL Pro, —Å—Ç–∞–≤–∏–º –æ–±—ã—á–Ω—ã–π PostgreSQL)**.

–ù–∏–∂–µ –ø—Ä—è–º –ø–æ—à–∞–≥–æ–≤–æ: **—á—Ç–æ —Å–¥–µ–ª–∞—Ç—å, —á—Ç–æ –¥–æ–ª–∂–Ω–æ –ø–æ–ª—É—á–∏—Ç—å—Å—è, —á—Ç–æ –∏–º–µ–Ω–Ω–æ —Å–∫—Ä–∏–Ω–∏—Ç—å**.

---

## –®–∞–≥ 0. –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ Ubuntu (1 —Ä–∞–∑, –ø–µ—Ä–µ–¥ –≤—Å–µ–º–∏ —Å–µ—Ä–≤–∏—Å–∞–º–∏)

–û—Ç–∫—Ä–æ–π —Ç–µ—Ä–º–∏–Ω–∞–ª –∏ –≤—ã–ø–æ–ª–Ω–∏:

```bash
sudo apt update
sudo apt -y upgrade
sudo apt -y install ca-certificates curl gnupg lsb-release
```

### –ß—Ç–æ —Å–∫—Ä–∏–Ω–∏—Ç—å

* –°–∫—Ä–∏–Ω —Ç–µ—Ä–º–∏–Ω–∞–ª–∞ –ø–æ—Å–ª–µ `apt update`/`upgrade` (–≤–∏–¥–Ω–æ, —á—Ç–æ —Å–∏—Å—Ç–µ–º–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∞).

---

## –®–∞–≥ 1. –°—Ç–∞–≤–∏–º Docker + Compose (—á—Ç–æ–±—ã –≤—Å—ë –¥–∞–ª—å—à–µ —Å—Ç–∞–≤–∏—Ç—å –æ–¥–∏–Ω–∞–∫–æ–≤–æ)

### 1.1 –£—Å—Ç–∞–Ω–æ–≤–∫–∞ Docker (–æ—Ñ–∏—Ü–∏–∞–ª—å–Ω—ã–π —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π)

```bash
sudo install -m 0755 -d /etc/apt/keyrings

curl -fsSL https://download.docker.com/linux/ubuntu/gpg | sudo gpg --dearmor -o /etc/apt/keyrings/docker.gpg
sudo chmod a+r /etc/apt/keyrings/docker.gpg

echo \
  "deb [arch=$(dpkg --print-architecture) signed-by=/etc/apt/keyrings/docker.gpg] \
  https://download.docker.com/linux/ubuntu $(lsb_release -cs) stable" | \
  sudo tee /etc/apt/sources.list.d/docker.list > /dev/null

sudo apt update
sudo apt -y install docker-ce docker-ce-cli containerd.io docker-buildx-plugin docker-compose-plugin
```

### 1.2 –î–µ–ª–∞–µ–º, —á—Ç–æ–±—ã docker —Ä–∞–±–æ—Ç–∞–ª –±–µ–∑ sudo

```bash
sudo usermod -aG docker $USER
newgrp docker
```

### 1.3 –ü—Ä–æ–≤–µ—Ä–∫–∞

```bash
docker --version
docker compose version
docker run --rm hello-world
```

### –ß—Ç–æ —Å–∫—Ä–∏–Ω–∏—Ç—å (–¥–ª—è –æ—Ç—á—ë—Ç–∞ 3.5 –∏ –≤–æ–æ–±—â–µ)

1. –≤—ã–≤–æ–¥ `docker --version` –∏ `docker compose version`
2. —É—Å–ø–µ—à–Ω—ã–π –≤—ã–≤–æ–¥ `hello-world`

---

## –®–∞–≥ 2. PostgreSQL (–≤ –æ—Ç—á—ë—Ç–µ: PostgreSQL Pro)

–ú—ã –ø–æ–¥–Ω–∏–º–µ–º PostgreSQL –≤ Docker + —Å–¥–µ–ª–∞–µ–º —Ç–µ—Å—Ç–æ–≤—É—é –ë–î –∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è.
–°—Ä–∞–∑—É –∑–∞–ª–æ–∂–∏–º —Å—Ç—Ä—É–∫—Ç—É—Ä—É, —á—Ç–æ–±—ã –ø–æ—Ç–æ–º –∫ –Ω–µ–π –ø–æ–¥–∫–ª—é—á–∞–ª–∏—Å—å EspoCRM / OpenProject / Zammad (–µ—Å–ª–∏ –Ω—É–∂–Ω–æ).

### 2.1 –°–æ–∑–¥–∞—ë–º –ø–∞–ø–∫—É –ø—Ä–æ–µ–∫—Ç–∞

```bash
mkdir -p ~/infra/services/postgres
cd ~/infra/services/postgres
```

### 2.2 –°–æ–∑–¥–∞—ë–º `compose.yml`

–û—Ç–∫—Ä–æ–π —Ñ–∞–π–ª:

```bash
nano compose.yml
```

–í—Å—Ç–∞–≤—å:

```yaml
services:
  postgres:
    image: postgres:16
    container_name: pg-main
    restart: unless-stopped
    environment:
      POSTGRES_USER: infra_admin
      POSTGRES_PASSWORD: StrongPass_12345
      POSTGRES_DB: infra
    ports:
      - "5432:5432"
    volumes:
      - pg_data:/var/lib/postgresql/data

volumes:
  pg_data:
```

> –ü–∞—Ä–æ–ª—å –º–æ–∂–µ—à—å –ø–æ–º–µ–Ω—è—Ç—å, –Ω–æ **–ø–æ—Ç–æ–º –Ω–µ –∑–∞–±—É–¥—å –≤–µ–∑–¥–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ç–æ—Ç –∂–µ**.

### 2.3 –ó–∞–ø—É—Å–∫

```bash
docker compose up -d
docker ps
```

### –ß—Ç–æ —Å–∫—Ä–∏–Ω–∏—Ç—å

* `docker ps` –≥–¥–µ –≤–∏–¥–Ω–æ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä `pg-main` –≤ —Å—Ç–∞—Ç—É—Å–µ `Up`
* —Å–∞–º —Ñ–∞–π–ª `compose.yml` (–º–æ–∂–Ω–æ —Å–∫—Ä–∏–Ω –∏–∑ nano/VS Code)

---

## –®–∞–≥ 3. –ü—Ä–æ–≤–µ—Ä–∫–∞, —á—Ç–æ –ë–î —Ä–µ–∞–ª—å–Ω–æ —Ä–∞–±–æ—Ç–∞–µ—Ç

### 3.1 –ó–∞–π—Ç–∏ –≤–Ω—É—Ç—Ä—å Postgres –∏ –ø–æ—Å–º–æ—Ç—Ä–µ—Ç—å –≤–µ—Ä—Å–∏–∏

```bash
docker exec -it pg-main psql -U infra_admin -d infra
```

–í–Ω—É—Ç—Ä–∏ psql –≤—ã–ø–æ–ª–Ω–∏:

```sql
SELECT version();
\l
\du
```

–í—ã—Ö–æ–¥:

```sql
\q
```

### –ß—Ç–æ —Å–∫—Ä–∏–Ω–∏—Ç—å

* `SELECT version();` (—ç—Ç–æ –ø—Ä—è–º –∂–µ–ª–µ–∑–Ω–æ–µ –¥–æ–∫–∞–∑–∞—Ç–µ–ª—å—Å—Ç–≤–æ, —á—Ç–æ PostgreSQL –ø–æ–¥–Ω—è—Ç)
* —Å–ø–∏—Å–æ–∫ –±–∞–∑ `\l`

---

## –®–∞–≥ 4. –°–æ–∑–¥–∞—ë–º –±–∞–∑—ã –∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –ø–æ–¥ –±—É–¥—É—â–∏–µ —Å–µ—Ä–≤–∏—Å—ã (—á—Ç–æ–±—ã –ø–æ—Ç–æ–º –±—ã–ª–æ –ø—Ä–æ—â–µ)

–°–Ω–æ–≤–∞ –∑–∞–π–¥–∏ –≤ psql:

```bash
docker exec -it pg-main psql -U infra_admin -d infra
```

–í—ã–ø–æ–ª–Ω–∏:

```sql
-- –±–∞–∑—ã –ø–æ–¥ —Å–µ—Ä–≤–∏—Å—ã
CREATE DATABASE gitlab_db;
CREATE DATABASE openproject_db;
CREATE DATABASE espocrm_db;
CREATE DATABASE zammad_db;
CREATE DATABASE nextcloud_db;
CREATE DATABASE graylog_db;

-- –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å, –∫–æ—Ç–æ—Ä—ã–π –±—É–¥–µ—Ç –ø–æ–¥–∫–ª—é—á–∞—Ç—å—Å—è —Å–µ—Ä–≤–∏—Å–∞–º–∏
CREATE USER app_user WITH PASSWORD 'AppPass_12345';

-- –≤—ã–¥–∞—ë–º –ø—Ä–∞–≤–∞
GRANT ALL PRIVILEGES ON DATABASE gitlab_db TO app_user;
GRANT ALL PRIVILEGES ON DATABASE openproject_db TO app_user;
GRANT ALL PRIVILEGES ON DATABASE espocrm_db TO app_user;
GRANT ALL PRIVILEGES ON DATABASE zammad_db TO app_user;
GRANT ALL PRIVILEGES ON DATABASE nextcloud_db TO app_user;
GRANT ALL PRIVILEGES ON DATABASE graylog_db TO app_user;
```

–ü—Ä–æ–≤–µ—Ä–∫–∞:

```sql
\l
\q
```

### –ß—Ç–æ —Å–∫—Ä–∏–Ω–∏—Ç—å

* –≤—ã–≤–æ–¥ `\l` –≥–¥–µ –≤–∏–¥–Ω–æ, —á—Ç–æ –±–∞–∑—ã —Ä–µ–∞–ª—å–Ω–æ —Å–æ–∑–¥–∞–Ω—ã

---

## –ú–∏–Ω–∏-—Ç–µ–∫—Å—Ç –¥–ª—è –æ—Ç—á—ë—Ç–∞ (—á—Ç–æ–±—ã —Ç—ã –ø—Ä–æ—Å—Ç–æ –≤—Å—Ç–∞–≤–∏–ª)

–ú–æ–∂–µ—à—å –≤—Å—Ç–∞–≤–∏—Ç—å —Ç–∞–∫ (1‚Äì2 –∞–±–∑–∞—Ü–∞):

> –ü—Ä–æ–∏–∑–≤—ë–ª —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ –°–£–ë–î (PostgreSQL Pro –∫–∞–∫ —Ü–µ–ª–µ–≤–æ–≥–æ —Ä–µ—à–µ–Ω–∏—è, —Å–æ–≤–º–µ—Å—Ç–∏–º–æ–≥–æ —Å PostgreSQL). –î–ª—è —É–ø—Ä–æ—â–µ–Ω–∏—è –ª–∞–±–æ—Ä–∞—Ç–æ—Ä–Ω–æ–≥–æ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è –Ω–∞ —Ç–µ—Å—Ç–æ–≤–æ–π –í–ú –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∞ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∏–∑–∞—Ü–∏—è Docker –∏ –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω—ã–π –æ–±—Ä–∞–∑ PostgreSQL. –°–æ–∑–¥–∞–Ω —ç–∫–∑–µ–º–ø–ª—è—Ä –°–£–ë–î, –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω–∏—è –∏ –Ω–∞–±–æ—Ä –±–∞–∑ –¥–∞–Ω–Ω—ã—Ö –¥–ª—è –ø—Ä–∏–∫–ª–∞–¥–Ω—ã—Ö —Å–µ—Ä–≤–∏—Å–æ–≤ (GitLab, OpenProject, EspoCRM, Zammad, Nextcloud, Graylog). –†–∞–±–æ—Ç–æ—Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç—å –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∞ –∑–∞–ø—É—Å–∫–æ–º –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ –∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ–º SQL-–∫–æ–º–∞–Ω–¥ –ø—Ä–æ–≤–µ—Ä–∫–∏ –≤–µ—Ä—Å–∏–∏ –∏ —Å–ø–∏—Å–∫–∞ –ë–î.

---

## –ß—Ç–æ –¥–∞–ª—å—à–µ (—Å–ª–µ–¥—É—é—â–∏–π —Å–µ—Ä–≤–∏—Å)

–ü–æ—Å–ª–µ —Ç–æ–≥–æ –∫–∞–∫ —Ç—ã **–ø–æ–¥–Ω–∏–º–µ—à—å Postgres –∏ —Å–¥–µ–ª–∞–µ—à—å —Å–∫—Ä–∏–Ω—ã**, —Å–ª–µ–¥—É—é—â–∏–º –ª–æ–≥–∏—á–Ω–µ–µ –≤—Å–µ–≥–æ —Å—Ç–∞–≤–∏—Ç—å:

**GitLab** (–æ–Ω —Å–∞–º—ã–π —Ç—è–∂—ë–ª—ã–π –∏ —Å—Ä–∞–∑—É –ø–æ–∫–∞–∂–µ—Ç, —á—Ç–æ –≤—Å—ë –æ–∫).

---

–ù–∞–ø–∏—à–∏:

1. –ø–æ–ª—É—á–∏–ª–æ—Å—å –ª–∏ `docker run hello-world`
2. —á—Ç–æ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç `docker ps` (–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä pg-main Up?)

–ò —Å—Ä–∞–∑—É –¥–≤–∏–≥–∞–µ–º –∫ **GitLab**.
